{% extends "base.html" %}

{% block title %}
  <title>{{ dish.name }}</title>
{% endblock %}

{% block content %}
  <h1>{{ dish.name }}</h1>
  <div class="row m-2">
    <div class="col">
      <p><strong>Dish type:</strong> {{ dish.dish_type.name }}</p>
      <p>
        <strong>Description: </strong>
        {{ dish.description }}
      </p>
      <p><strong>Price:</strong> {{ dish.price }}</p>
    </div>
  </div>
  <div class="row m-2">
    <div class="col">
      <a href="{% url 'kitchen:dish-update' pk=dish.id %}"
        class="btn btn-outline-info m-2">
        Update
      </a>
      <a href="{% url 'kitchen:dish-delete' pk=dish.id %}"
        class="btn btn-outline-danger">
        Delete
      </a>
      {% if dish in user.dishes.all %}
        <a href="{% url 'kitchen:toggle-dish-assign' pk=dish.id %}"
        class="btn btn-danger m-2"
        >
          Discharge me
        </a>
      {% else %}
        <a href="{% url 'kitchen:toggle-dish-assign' pk=dish.id %}"
        class="btn btn-info m-2"
        >
          Assign me
        </a>
      {% endif %}
    </div>
  </div>

<div class="row">
  <div class="col m-2">
    <ul class="list-group w-50">
      <h3>All responsible cooks:</h3>  
      
      {% for cook in dish.cooks.all %}
        <li class="list-group-item"><a href="{{ cook.get_absolute_url }}">
              {{ cook.username }} {% if user == cook %}(Me){%  endif %}
              {{ cook.email }}
        </a></li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
  